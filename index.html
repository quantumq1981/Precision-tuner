<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Melodic Minor Dominant Colors</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #e4e4e4;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
      color: #00d4ff;
      font-size: 2rem;
    }

    .subtitle {
      text-align: center;
      color: #999;
      margin-bottom: 30px;
      font-size: 0.9rem;
    }

    .root-selector {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 25px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .root-selector h2 {
      margin-bottom: 15px;
      color: #00d4ff;
      font-size: 1.1rem;
    }

    .root-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .root-btn {
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.08);
      border: 2px solid rgba(0, 212, 255, 0.3);
      border-radius: 8px;
      color: #e4e4e4;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 1rem;
      font-weight: 600;
    }

    .root-btn:hover {
      background: rgba(0, 212, 255, 0.2);
      border-color: #00d4ff;
      transform: translateY(-2px);
    }

    .root-btn.active {
      background: #00d4ff;
      color: #1a1a2e;
      border-color: #00d4ff;
    }

    .colors-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .color-card {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .color-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    }

    .color-card.altered {
      border-color: rgba(255, 71, 87, 0.5);
    }

    .color-card.altered.active {
      background: rgba(255, 71, 87, 0.15);
      border-color: #ff4757;
    }

    .color-card.lydian {
      border-color: rgba(255, 195, 18, 0.5);
    }

    .color-card.lydian.active {
      background: rgba(255, 195, 18, 0.15);
      border-color: #ffc312;
    }

    .color-card.mixb6 {
      border-color: rgba(87, 101, 255, 0.5);
    }

    .color-card.mixb6.active {
      background: rgba(87, 101, 255, 0.15);
      border-color: #5765ff;
    }

    .color-card.sus {
      border-color: rgba(162, 155, 254, 0.5);
    }

    .color-card.sus.active {
      background: rgba(162, 155, 254, 0.15);
      border-color: #a29bfe;
    }

    .color-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .color-card.altered .color-title {
      color: #ff4757;
    }

    .color-card.lydian .color-title {
      color: #ffc312;
    }

    .color-card.mixb6 .color-title {
      color: #5765ff;
    }

    .color-card.sus .color-title {
      color: #a29bfe;
    }

    .parent-scale {
      font-size: 0.95rem;
      color: #aaa;
      margin-bottom: 12px;
    }

    .degrees {
      font-size: 1.05rem;
      color: #ddd;
      margin-bottom: 15px;
      line-height: 1.6;
    }

    .practice-tip {
      font-size: 0.85rem;
      color: #999;
      font-style: italic;
      line-height: 1.5;
    }

    .display-panel {
      background: rgba(0, 212, 255, 0.1);
      border: 2px solid rgba(0, 212, 255, 0.3);
      border-radius: 12px;
      padding: 30px;
      margin-top: 30px;
      display: none;
    }

    .display-panel.show {
      display: block;
      animation: fadeIn 0.4s;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .display-panel h3 {
      color: #00d4ff;
      margin-bottom: 20px;
      font-size: 1.5rem;
    }

    .scale-notes {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .note-box {
      background: rgba(255, 255, 255, 0.1);
      padding: 15px 20px;
      border-radius: 8px;
      font-size: 1.2rem;
      font-weight: 600;
      border: 2px solid rgba(0, 212, 255, 0.4);
    }

    .degree-analysis {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .degree-analysis h4 {
      color: #00d4ff;
      margin-bottom: 12px;
    }

    .practice-ideas {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 25px;
    }

    .practice-ideas h4 {
      color: #00d4ff;
      margin-bottom: 12px;
    }

    .practice-ideas ul {
      list-style: none;
      padding-left: 0;
    }

    .practice-ideas li {
      padding: 8px 0;
      padding-left: 20px;
      position: relative;
    }

    .practice-ideas li:before {
      content: "→";
      position: absolute;
      left: 0;
      color: #00d4ff;
    }

    .warning {
      background: rgba(255, 195, 18, 0.1);
      border-left: 4px solid #ffc312;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 25px;
      font-size: 0.9rem;
    }

    .fretboard-section {
      background: rgba(255, 255, 255, 0.05);
      padding: 25px;
      border-radius: 8px;
      margin-top: 25px;
    }

    .fretboard-section h4 {
      color: #00d4ff;
      margin-bottom: 20px;
      font-size: 1.2rem;
    }

    .position-selector {
      display: flex;
      gap: 10px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }

    .position-btn {
      padding: 10px 18px;
      background: rgba(255, 255, 255, 0.08);
      border: 2px solid rgba(0, 212, 255, 0.3);
      border-radius: 6px;
      color: #e4e4e4;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.95rem;
      font-weight: 600;
    }

    .position-btn:hover {
      background: rgba(0, 212, 255, 0.2);
      border-color: #00d4ff;
    }

    .position-btn.active {
      background: #00d4ff;
      color: #1a1a2e;
      border-color: #00d4ff;
    }

    .fretboard {
      background: #2d2d2d;
      border-radius: 8px;
      padding: 20px;
      overflow-x: auto;
    }

    .fretboard-grid {
      display: inline-block;
      min-width: 600px;
    }

    .string {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      position: relative;
    }

    .string-label {
      width: 30px;
      font-size: 0.9rem;
      color: #888;
      font-weight: 600;
    }

    .fret {
      width: 50px;
      height: 35px;
      border-right: 1px solid #444;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      background: rgba(0, 0, 0, 0.2);
    }

    .fret.first {
      border-left: 3px solid #666;
    }

    .fret-marker {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      transition: all 0.2s;
    }

    .fret-marker.root {
      background: #ff4757;
      color: white;
      border: 2px solid #ff6b7a;
    }

    .fret-marker.scale {
      background: #00d4ff;
      color: #1a1a2e;
      border: 2px solid #33dfff;
    }

    .fret-marker.empty {
      opacity: 0;
    }

    .fret-numbers {
      display: flex;
      margin-left: 30px;
      margin-top: 5px;
      margin-bottom: 15px;
    }

    .fret-num {
      width: 50px;
      text-align: center;
      font-size: 0.8rem;
      color: #666;
      font-weight: 600;
    }

    .pattern-info {
      background: rgba(0, 212, 255, 0.1);
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
      border-left: 3px solid #00d4ff;
    }

    .pattern-info h5 {
      color: #00d4ff;
      margin-bottom: 8px;
      font-size: 1rem;
    }

    .pattern-info p {
      color: #ccc;
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .legend {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      align-items: center;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
    }

    .legend-dot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
    }

    .legend-dot.root {
      background: #ff4757;
      border: 2px solid #ff6b7a;
    }

    .legend-dot.scale {
      background: #00d4ff;
      border: 2px solid #33dfff;
    }

    @media (max-width: 768px) {
      .colors-grid {
        grid-template-columns: 1fr;
      }

      h1 {
        font-size: 1.5rem;
      }

      .fretboard {
        padding: 10px;
      }

      .fret {
        width: 40px;
        height: 30px;
      }

      .fret-num {
        width: 40px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🎸 Melodic Minor Over Dominants</h1>
    <p class="subtitle">Parent scale relationships + fretboard positions for dominant chord colors</p>

    <div class="root-selector">
      <h2>Select Dominant Root (V7)</h2>
      <div class="root-buttons" id="rootButtons"></div>
    </div>

    <div class="colors-grid">
      <div class="color-card altered" data-color="altered">
        <div class="color-title">Altered</div>
        <div class="parent-scale">Parent: ½ step up</div>
        <div class="degrees">b9, #9, 3, #11, b13, b7</div>
        <div class="practice-tip">Maximum tension for V→I resolution. Target b9→R, b13→5, #9→3</div>
      </div>

      <div class="color-card lydian" data-color="lydian">
        <div class="color-title">Lydian Dominant</div>
        <div class="parent-scale">Parent: up a 5th</div>
        <div class="degrees">1, 2, 3, #11, 5, 6, b7</div>
        <div class="practice-tip">Bright, open V sound. Avoids IV when #11 is emphasized</div>
      </div>

      <div class="color-card mixb6" data-color="mixb6">
        <div class="color-title">Mixolydian ♭6</div>
        <div class="parent-scale">Parent: up a 4th</div>
        <div class="degrees">1, 2, 3, 4, 5, b6, b7</div>
        <div class="practice-tip">Dark dominant color. Great for V in minor keys, secondary dominants</div>
      </div>

      <div class="color-card sus" data-color="sus">
        <div class="color-title">V7sus(♭9)</div>
        <div class="parent-scale">Parent: down whole step</div>
        <div class="degrees">1, b9, 4, 5, 6, b7 (no 3rd)</div>
        <div class="practice-tip">For suspended dominants only. Dorian b2 sound without the 3rd</div>
      </div>
    </div>

    <div class="display-panel" id="displayPanel">
      <h3 id="panelTitle"></h3>

      <div class="warning" id="warningBox" style="display: none;"></div>

      <div class="scale-notes" id="scaleNotes"></div>

      <div class="degree-analysis">
        <h4>Scale Degrees Over Dominant</h4>
        <p id="degreeText"></p>
      </div>

      <div class="practice-ideas">
        <h4>In The Shed</h4>
        <ul id="practiceList"></ul>
      </div>

      <div class="fretboard-section">
        <h4>Fretboard Positions</h4>

        <div class="position-selector" id="positionSelector"></div>

        <div class="fretboard">
          <div class="fretboard-grid" id="fretboardGrid"></div>
          <div class="legend">
            <div class="legend-item">
              <div class="legend-dot root"></div>
              <span>Root (parent melodic minor)</span>
            </div>
            <div class="legend-item">
              <div class="legend-dot scale"></div>
              <span>Scale tones</span>
            </div>
          </div>
        </div>

        <div class="pattern-info" id="patternInfo"></div>
      </div>
    </div>
  </div>

  <script>
    const notes = ['C', 'D♭', 'D', 'E♭', 'E', 'F', 'G♭', 'G', 'A♭', 'A', 'B♭', 'B'];
    const sharpNotes = ['C', 'C♯', 'D', 'D♯', 'E', 'F', 'F♯', 'G', 'G♯', 'A', 'A♯', 'B'];
    const standardTuning = ['E', 'A', 'D', 'G', 'B', 'E'];

    let currentRoot = 'G';
    let currentColor = null;
    let currentPosition = 0;

    const colors = {
      altered: {
        offset: 1,
        degrees: '1, b9, #9, 3, #11, b13, b7',
        practice: [
          'Target b9→R resolution in ii-V-I progressions',
          'Use b13→5 descent over V',
          'Stack #9 and 3 for intense color (sounds like b3 + 3)',
          'Practice arpeggios: R-3-b13-b9, R-#11-b7-#9'
        ],
        warning: null
      },
      lydian: {
        offset: 7,
        degrees: '1, 2, 3, #11, 5, 6, b7',
        practice: [
          'Emphasize #11 to avoid sounding like IV',
          'Play triads from 3rd: E major over G7 = G Lydian Dom',
          'Use in place of Mixolydian for brighter V sound',
          'Great for jazz-funk, fusion vamps on static V'
        ],
        warning: null
      },
      mixb6: {
        offset: 5,
        degrees: '1, 2, 3, 4, 5, b6, b7',
        practice: [
          'Darker alternative to Mixolydian',
          'Perfect for V7 in minor keys (V of i)',
          'Use on secondary dominants for modal color',
          'Pairs well with b9 and b13 alterations'
        ],
        warning: null
      },
      sus: {
        offset: -2,
        degrees: '1, b9, 4, 5, 6, b7 (omit 3)',
        practice: [
          'Use ONLY on suspended dominants (no major 3rd)',
          'Dorian b2 sound: F melodic minor over G7sus',
          'Comp without the 3rd to maintain sus quality',
          'Resolve sus→3 at cadence for release'
        ],
        warning: '⚠️ This is for V7sus(b9) only — not for regular dominant 7th chords with a major 3rd. If you\'re playing a plain G7, use one of the other three colors.'
      }
    };

    const positions = [
      { name: 'Pos 1 (Open/Low)', startFret: 0, endFret: 4, desc: 'Open position patterns. Root on 6th string, extends to 4th fret.' },
      { name: 'Pos 2', startFret: 2, endFret: 6, desc: '2nd-5th position. Root typically on 5th or 6th string, middle of neck access.' },
      { name: 'Pos 3', startFret: 5, endFret: 9, desc: '5th-9th position. Root on 5th or 4th string. Strong box pattern.' },
      { name: 'Pos 4', startFret: 7, endFret: 11, desc: '7th-11th position. Root on 4th or 3rd string. Upper extension range.' },
      { name: 'Pos 5', startFret: 10, endFret: 14, desc: '10th-14th position. Root on 3rd string, upper register melodic work.' },
      { name: 'Pos 6 (High)', startFret: 12, endFret: 16, desc: 'Octave position (12th fret+). Mirrors open position higher.' },
      { name: 'Full Neck', startFret: 0, endFret: 15, desc: 'Complete fretboard view showing all scale tone locations.' }
    ];

    function getNoteIndex(note) {
      let idx = notes.indexOf(note);
      if (idx === -1) {
        idx = sharpNotes.indexOf(note);
      }
      return idx;
    }

    function getNoteName(index) {
      return notes[(index + 12) % 12];
    }

    function getMelodicMinor(root, offset) {
      const rootIndex = getNoteIndex(root);
      const parentIndex = (rootIndex + offset + 12) % 12;
      const parentRoot = getNoteName(parentIndex);

      const scale = [];
      const intervals = [0, 2, 3, 5, 7, 9, 11];

      for (const interval of intervals) {
        const noteIndex = (parentIndex + interval) % 12;
        scale.push(getNoteName(noteIndex));
      }

      return { parent: parentRoot, notes: scale, rootIndex: parentIndex };
    }

    function getFretNote(stringNote, fret) {
      const stringIndex = getNoteIndex(stringNote);
      return getNoteName(stringIndex + fret);
    }

    function drawFretboard(scaleData, position) {
      const grid = document.getElementById('fretboardGrid');
      grid.innerHTML = '';

      const startFret = position.startFret;
      const endFret = position.endFret;

      const fretNumbers = document.createElement('div');
      fretNumbers.className = 'fret-numbers';
      for (let f = startFret; f <= endFret; f += 1) {
        const num = document.createElement('div');
        num.className = 'fret-num';
        num.textContent = f === 0 ? 'O' : f;
        fretNumbers.appendChild(num);
      }
      grid.appendChild(fretNumbers);

      for (let s = 0; s < 6; s += 1) {
        const stringDiv = document.createElement('div');
        stringDiv.className = 'string';

        const label = document.createElement('div');
        label.className = 'string-label';
        label.textContent = standardTuning[s];
        stringDiv.appendChild(label);

        for (let f = startFret; f <= endFret; f += 1) {
          const fretDiv = document.createElement('div');
          fretDiv.className = 'fret';
          if (f === startFret) {
            fretDiv.classList.add('first');
          }

          const fretNote = getFretNote(standardTuning[s], f);
          const noteIndex = getNoteIndex(fretNote);

          const marker = document.createElement('div');
          marker.className = 'fret-marker';

          if (noteIndex === scaleData.rootIndex) {
            marker.classList.add('root');
            marker.textContent = 'R';
          } else if (scaleData.notes.includes(fretNote)) {
            marker.classList.add('scale');
            const degreeIdx = scaleData.notes.indexOf(fretNote) + 1;
            marker.textContent = degreeIdx;
          } else {
            marker.classList.add('empty');
          }

          fretDiv.appendChild(marker);
          stringDiv.appendChild(fretDiv);
        }

        grid.appendChild(stringDiv);
      }
    }

    function initRootButtons() {
      const container = document.getElementById('rootButtons');
      container.innerHTML = '';
      notes.forEach((note) => {
        const btn = document.createElement('button');
        btn.className = 'root-btn';
        btn.textContent = `${note}7`;
        if (note === currentRoot) {
          btn.classList.add('active');
        }
        btn.addEventListener('click', () => selectRoot(note, btn));
        container.appendChild(btn);
      });
    }

    function selectRoot(root, btn) {
      currentRoot = root;
      document.querySelectorAll('.root-btn').forEach((b) => b.classList.remove('active'));
      btn.classList.add('active');

      if (currentColor) {
        showColorInfo(currentColor);
      }
    }

    function initPositionButtons() {
      const container = document.getElementById('positionSelector');
      container.innerHTML = '';

      positions.forEach((pos, idx) => {
        const btn = document.createElement('button');
        btn.className = 'position-btn';
        btn.textContent = pos.name;
        if (idx === currentPosition) {
          btn.classList.add('active');
        }
        btn.addEventListener('click', () => selectPosition(idx, btn));
        container.appendChild(btn);
      });
    }

    function selectPosition(idx, btn) {
      currentPosition = idx;
      document.querySelectorAll('.position-btn').forEach((b) => b.classList.remove('active'));
      btn.classList.add('active');

      if (currentColor) {
        const color = colors[currentColor];
        const scale = getMelodicMinor(currentRoot, color.offset);
        drawFretboard(scale, positions[idx]);
        updatePatternInfo(positions[idx]);
      }
    }

    function updatePatternInfo(position) {
      const info = document.getElementById('patternInfo');
      info.innerHTML = `
        <h5>${position.name}</h5>
        <p>${position.desc}</p>
      `;
    }

    function showColorInfo(colorKey) {
      currentColor = colorKey;
      const color = colors[colorKey];
      const scale = getMelodicMinor(currentRoot, color.offset);

      const panel = document.getElementById('displayPanel');
      const title = document.getElementById('panelTitle');
      const scaleNotes = document.getElementById('scaleNotes');
      const degreeText = document.getElementById('degreeText');
      const practiceList = document.getElementById('practiceList');
      const warningBox = document.getElementById('warningBox');

      const colorNames = {
        altered: 'Altered',
        lydian: 'Lydian Dominant',
        mixb6: 'Mixolydian ♭6',
        sus: 'V7sus(♭9)'
      };

      title.textContent = `${currentRoot}7 ${colorNames[colorKey]} → ${scale.parent} Melodic Minor`;

      scaleNotes.innerHTML = '';
      scale.notes.forEach((note) => {
        const noteBox = document.createElement('div');
        noteBox.className = 'note-box';
        noteBox.textContent = note;
        scaleNotes.appendChild(noteBox);
      });

      degreeText.textContent = color.degrees;

      practiceList.innerHTML = '';
      color.practice.forEach((tip) => {
        const li = document.createElement('li');
        li.textContent = tip;
        practiceList.appendChild(li);
      });

      if (color.warning) {
        warningBox.textContent = color.warning;
        warningBox.style.display = 'block';
      } else {
        warningBox.style.display = 'none';
      }

      initPositionButtons();
      drawFretboard(scale, positions[currentPosition]);
      updatePatternInfo(positions[currentPosition]);

      panel.classList.add('show');
    }

    function initColorCards() {
      document.querySelectorAll('.color-card').forEach((card) => {
        card.addEventListener('click', () => {
          document.querySelectorAll('.color-card').forEach((c) => c.classList.remove('active'));
          card.classList.add('active');
          showColorInfo(card.dataset.color);
        });
      });
    }

    function init() {
      initRootButtons();
      initColorCards();
      showColorInfo('altered');
      const alteredCard = document.querySelector('.color-card.altered');
      if (alteredCard) {
        alteredCard.classList.add('active');
      }
    }

    init();
  </script>
</body>
</html>
